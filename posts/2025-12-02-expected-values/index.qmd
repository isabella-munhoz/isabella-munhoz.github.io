---
title: "O que podemos esperar do n√£o visto..."
description: "(e isso n√£o √© sobre tarot ou astrologia)"
author: Isabella Munhoz
date: 2025-12-02
#categories: [categoria-teste] # self-defined categories
image: 2025-12-02-thumb.jpg
draft: false # true: post n√£o aparece no site (√© considerado rascunho)
---

::: {style="width: 100%; height: 250px; overflow: hidden; margin-bottom: 1rem;"}
<img src="2025-12-02-thumb.jpg" alt="Imagem de capa" style="width: 100%; object-fit: cover; object-position: center;"/>
:::

```{r}

library(dplyr)
library(ggplot2)
library(kableExtra)

my_options <- options(
  scipen = 999
)

mk_tbl <- function(data, table_title) {
  
  k <- data |>
    kable(
      caption = table_title,
      format = "html",
      align = rep("c", ncol(data))   # centraliza todas as colunas
    ) |>
    kable_styling(
      bootstrap_options = c("striped", "hover", "condensed", "responsive"),
      full_width = FALSE,
      position = "center"
    )
  
  # for√ßa cada coluna a ter a mesma largura
  n_cols <- ncol(data)
  col_width <- sprintf("%.0f%%", 100 / n_cols)  # divide igualmente
  
  for (i in seq_len(n_cols)) {
    k <- k |>
      column_spec(
        i,
        width = col_width,
        extra_css = "text-align: center;"   # sem bordas verticais
      )
  }
  
  k |> 
    scroll_box(width = "80%", extra_css = "margin: 0 auto;")
}

```

# Introdu√ß√£o

Vamos come√ßar imaginando um mundo paralelo: um lugar com 1 milh√£o de habitantes. Como conhecemos cada pessoa desse mundo, sabemos exatamente a resposta deles para uma das perguntas mais importantes j√° feitas: *‚ÄúG√™meos √© o melhor signo do zod√≠aco, n√©?‚Äù*.

Claro que a resposta certa seria **SIM**, mas, para n√£o dizerem por a√≠ que estou favorecendo meu pr√≥prio signo, vamos supor outra realidade: entre os 1 milh√£o de habitantes, 200 mil concordam que G√™meos √© o melhor signo, enquanto 800 mil discordam (eu sei... as pessoas t√™m alguma resist√™ncia com geminianos... completamente injustificada, ali√°s).

A tabela abaixo apresenta 10 habitantes do mundo que criamos. A coluna **id** representa o identificador de cada indiv√≠duo (como se fosse o CPF), enquanto a coluna **answer** indica se aquela pessoa acredita que G√™meos √© o melhor signo do zod√≠aco (0 = ‚Äún√£o‚Äù, 1 = ‚Äúsim‚Äù).

```{r echo = TRUE}

set.seed(123)
n <- 1e6
population <- tidyr::tibble(
  id = paste0("id_", sample.int(n, n)), # ids aleat√≥rios dos habitantes do nosso mundo
  answer = c(rep(0, 800000), rep(1, 200000)) # resposta
)

set.seed(123)
population |> 
  slice_sample(
    n = 10
  ) |> 
  mk_tbl(table_title = "Exemplo da popula√ß√£o gerada")

```
<br>
Visualmente, o gr√°fico abaixo mostra quantos habitantes do nosso mundo acreditam (ou n√£o) que G√™meos √© o melhor signo.

```{r}

population |> 
  summarise(
    n = n(),
    .by = c(answer)
  ) |>
  mutate(
    perc = n / sum(n) * 100
  ) |> 
  ggplot(
    aes(
      x = factor(answer),
      y = n,
      fill = factor(answer)
    )
  ) +
  geom_bar(
    stat = "identity"
  ) +
  geom_text(
    aes(label = sprintf("%.1f%%", perc)),
    vjust = -0.3,
    size = 3
  ) +
  theme_minimal() +
  theme(legend.position = "none") +
  labs(
    x = "resposta",
    y = "quantidade de habitantes",
    title = "G√™meos √© o melhor signo do zod√≠aco?"
  )

```

Agora imagine duas amigas que vivem nesse mundo e s√£o apaixonadas por signos (e por jogos tamb√©m). Vamos cham√°-las de Ana e Bia.
Em um certo dia, Bia faz uma proposta para Ana:

üë© **Vamos sair agora e perguntar para a primeira pessoa que passar se ela acha que G√™meos √© o melhor signo do zod√≠aco. Se ela disser SIM, eu te dou 10 reais. Se disser N√ÉO, voc√™ me d√° 1 real.**

O questionamento √©: *Ana deveria aceitar esse jogo?*

Sabemos que apenas 20% da popula√ß√£o acredita que G√™meos √© o melhor signo. Ou seja, √© mais prov√°vel que Ana encontre algu√©m que responda n√£o (e, com isso, acabe perdendo 1 real)... Mas, se por sorte ela topar com algu√©m que responda sim, ela ganha 10 reais de uma vez...

Ana aceita a brincadeira, mas tenta melhorar suas chances: ela prop√µe que, em vez de perguntar apenas para uma pessoa, perguntem para 10 pessoas.

A regra segue sendo a mesma:

- para cada pessoa que disser que G√™meos n√£o √© o melhor signo, Ana paga 1 real para Bia;

- para cada pessoa que disser que G√™meos √© o melhor signo, Ana recebe 10 reais da Bia.

*Ser√° que Ana vai acabar mesmo ganhando dinheiro com esse jogo?*

# Que os jogos comecem

√â claro que, em um jogo de sorte, o resultado final depende justamente da SORTE. Ent√£o, na pr√°tica, s√≥ jogando para saber se a Ana sairia ganhando ou perdendo dinheiro. Mas existe uma forma de modelar esse cen√°rio estatisticamente e estimar quanto ela tende a ganhar (ou perder) em m√©dia.

Como conhecemos a distribui√ß√£o da popula√ß√£o (20% gostam de geminianos e 80% n√£o gostam), podemos imaginar o seguinte: a cada 10 pessoas abordadas, espera-se que 2 respondam que gostam do signo de G√™meos e 8 digam que n√£o gostam.

Com isso:

- Ana ganha 20 reais pelas duas respostas ‚Äúsim‚Äù;

- Ana perde 8 reais pelas oito respostas ‚Äún√£o‚Äù.

Ou seja, *o ganho esperado √© de (+20 -8) 12 reais.*

Como geramos a popula√ß√£o desse mundo fict√≠cio, vamos ver a aposta acontecendo na pr√°tica?

Abaixo, amostramos 10 pessoas da nossa popula√ß√£o (ou seja, as 10 pessoas aleat√≥rias que Ana e Bia encontrariam na rua) e calculamos quanto a Ana teria ganhado nesse cen√°rio.

```{r}

set.seed(1991)
smp <- population |> 
  sample_n(
    size = 10
  )

smp |> 
  summarise(
    n = n(),
    .by = c(answer)
  ) |> 
  mutate(
    balance = case_when(
      answer == 0 ~ n * (-1),
      answer == 1 ~ n * (+10)
    )
  ) |> 
  arrange(
    answer 
  ) |> 
  mk_tbl(
    table_title = "Amostra 1"
  )

```
<br>
Se o jogo tivesse acontecido com a amostra acima, 6 pessoas teriam respondido que n√£o gostam de G√™meos e 4 teriam dito que gostam. Assim, Ana **ganharia 40 reais** pelas quatro respostas ‚Äúsim‚Äù e **perderia 6 reais** pelas seis respostas ‚Äún√£o‚Äù. No total, ela ficaria com 34 reais (um valor superior aos 12 reais que est√°vamos esperando).

Mas... e se tiv√©ssemos retirado outra amostra da popula√ß√£o (exemplo abaixo)?

```{r}

set.seed(22)
smp <- population |> 
  sample_n(
    size = 10
  )

smp |> 
  summarise(
    n = n(),
    .by = c(answer)
  ) |> 
  mutate(
    balance = case_when(
      answer == 0 ~ n * (-1),
      answer == 1 ~ n * (+10)
    )
  ) |>
  arrange(
    answer 
  ) |> 
  mk_tbl(
    table_title = "Amostra 2"
  )

```
<br>
Se as pessoas selecionadas ao acaso fossem as da amostra acima, Ana **perderia 8 reais** pelas oito pessoas que n√£o gostam de G√™meos e **ganharia 20 reais** pelas duas pessoas que gostam. Assim, seu saldo final seria de **12 reais** (exatamente igual ao valor que esper√°vamos que ela ganhasse).

At√© o momento, parece que Ana fez uma boa escolha ao aceitar essa aposta, pois, em dois cen√°rios simulados, ela teria ganhado dinheiro!

Vamos avaliar mais um cen√°rio s√≥ pra ver o que aconteceria nele?

```{r}

set.seed(12)
smp <- population |> 
  sample_n(
    size = 10
  )

smp |> 
  summarise(
    n = n(),
    .by = c(answer)
  ) |> 
  mutate(
    balance = case_when(
      answer == 0 ~ n * (-1),
      answer == 1 ~ n * (+10)
    )
  ) |>
  arrange(
    answer 
  ) |> 
  mk_tbl(
    table_title = "Amostra 3"
  )

```
<br>
Nesse √∫ltimo cen√°rio, todas as pessoas entrevistadas diriam que n√£o gostam do signo de g√™meos, e, com isso, Ana teria **perdido 10 reais!!!**

Bom, √© √≥bvio que o que realmente vai acontecer vai depender da sorte... mas, pelo que notamos das amostras selecionadas acima, em 2 cen√°rios a aposta teria sido positiva pra Ana e em 1 cen√°rio ela teria perdido dinheiro. 

Como estamos em um ambiente de imagina√ß√£o (e temos a popula√ß√£o interia desse mundo), podemos extrair in√∫meas e in√∫meras amostras para ver qual seria o cen√°rio mais comum. Para isso, retiramos 1000 amostras da popula√ß√£o e, para cada amostra, calculamos qual o retorno financeiro cada amostra geraria para Ana. Na tabela abaixo, temos o exemplo de 10 dessas 1000 amostras.

```{r}

set.seed(123)
n_samples <- purrr::map_df(
  1:10000, ~{
    smp <- population |> sample_n(size = 10)
    balance <- (sum(smp$answer == 0) * (-1)) + (sum(smp$answer == 1) * (+10))
    tibble(
      sample_number = .x,
      answer_0 = sum(smp$answer == 0),
      answer_1 = sum(smp$answer == 1),
      balance = balance
    )
  }
)

set.seed(8)
n_samples |> 
  slice_head(
    n = 10
  ) |> 
  mk_tbl(
    table_title = "Balan√ßo financeiro considerando 10000 amostras"
  )

```
<br>


Podemos notar nesses 10 exemplos que em alguns cen√°rios Ana ganha mais dinheiro do que em outros cen√°rios. Como olhar dados em tabelas n√£o nos ajudam a tirar grandes conclusmn√µes, o 

O gr√°fico abaixo nos ajuda a visualizar o balan√ßo financeiro de todas as 1000 amostras que extra√≠mos acima.

```{r}

x_values <- unique(n_samples$balance)
n_samples |> 
  ggplot(
    aes(
      x = balance
    )
  ) +
  geom_histogram(binwidth = 1) +
  scale_x_continuous(breaks = x_values) +
  theme_minimal() +
  labs(
    title = "Distribui√ß√£o do retorno financeiro para as amostras geradas",
    x = "retorno financeiro (R$)",
    y = "quantidade de amostras"
  )

```

Pelo gr√°fico acima, observamos que, entre as 5.000 amostras simuladas, a maioria (cerca de 1.500 casos) resultou em um ganho de **12 reais** para a Ana. O mais interessante √© que esse resultado confirma exatamente a conta que fizemos l√° em cima: se sabemos que 20% dos indiv√≠duos da popula√ß√£o respondem "sim" e 80% respondem "n√£o", o ganho esperado fica em **12 reais**.

Esse tal "ganho esperado" que viemos calculando at√© ent√£o pode ser entedido formalmente na estat√≠stica atrav√©s do conceito de *valor esperado*... Agora que constru√≠mos uma base de conhecimento intuitiva atrav√©s do exemplo da aposta, podemos nos aprofundar nos conceitos com mais cuidado.

# Um passo atr√°s...

Antes de falar especificamente sobre valor esperado, √© importante definirmos dois conceitos fundamentais em estat√≠stica: **experimento aleat√≥rio** e **vari√°veis aleat√≥rias**.

Um **experimento aleat√≥rio** √© qualquer processo cujo resultado n√£o pode ser previsto com certeza antes de acontecer. Embora n√£o saibamos exatamente qual ser√° o desfecho, conhecemos o conjunto de possibilidades. Exemplos comuns incluem escolher uma pessoa ao acaso e medir sua altura, observar quanto tempo um √¥nibus demora para chegar a determinado local ou registrar a temperatura de um dia espec√≠fico. Realizamos experimentos aleat√≥rios para estudar fen√¥menos que envolvem incerteza: queremos compreender padr√µes, calcular probabilidades e prever comportamentos futuros, mesmo quando cada resultado individual √© imprevis√≠vel.

Para analisar os resultados de um experimento aleat√≥rio (que muitas vezes n√£o s√£o num√©ricos), utilizamos a ideia de **vari√°vel aleat√≥ria**. Uma vari√°vel aleat√≥ria √© uma regra que transforma cada resultado do experimento em um n√∫mero: essa regra recebe como entrada um elemento do experimento (uma pessoa, um dia, uma observa√ß√£o) e devolve um valor num√©rico que representa alguma caracter√≠stica desse elemento, como altura, tempo de atraso, quantidade de chuva ou um c√≥digo associado a uma categoria. Por exemplo, em um experimento que consiste em observar o resultado dos lan√ßamentos de uma moeda, podemos representar o experimento matematicamente como o valor 1 para toda vez que sair "cara" e 0 para toda vez que sair "coroa". Essa transforma√ß√£o √© essencial porque permite usar ferramentas matem√°ticas como m√©dias, vari√¢ncias e probabilidades para descrever o fen√¥meno. A vari√°vel aleat√≥ria funciona, portanto, como uma ponte que traduz o resultado incerto do mundo real para um formato num√©rico que podemos analisar.

No exemplo da aposta entre Ana e Bia, o **experimento aleat√≥rio** consiste em entrevistar 10 pessoas e registrar a resposta de cada pessoa √† pergunta *"G√™meos √© o melhor signo do zod√≠aco, n√©?"*. Embora n√£o saibamos antecipadamente qual ser√° a resposta de cada entrevistado, sabemos que cada pessoa pode responder apenas "sim" ou "n√£o". Isso torna o experimento aleat√≥rio: mesmo conhecendo os poss√≠veis resultados, a combina√ß√£o exata de respostas observadas (e, portanto, o ganho financeiro final) s√≥ √© revelada ao concluir as entrevistas. A **vari√°vel aleat√≥ria**, nesse caso, √© a regra que traduz cada resposta a um valor num√©rico associado ao retorno financeiro: se a resposta for "sim", o retorno financeiro √© +10, se a resposta for "n√£o" o retorno financeiro √© -1. Essa transforma√ß√£o converte um resultado qualitativo ("sim" ou "n√£o") em um n√∫mero, permitindo calcular m√©dias, probabilidades e, principalmente, o ganho final. Quando somamos os valores atribu√≠dos √†s 10 respostas obtemos o ganho total da aposta, que depende diretamente das respostas observadas no experimento.

As vari√°veis aleat√≥rias se tornam especialmente interessantes porque, apesar de dependerem do acaso, elas possuem uma caracter√≠stica chamada **valor esperado**, que funciona como uma medida do resultado m√©dio que esperar√≠amos observar se o experimento fosse repetido muitas vezes. No contexto da aposta entre Ana e Bia, o valor esperado nos ajuda a entender qual seria o ganho financeiro mais frequente considerando as regras da aposta, independentemente das oscila√ß√µes naturais que podem ocorrer em cada conjunto de entrevistas. Essa ideia de resumir o comportamento m√©dio ("mais frequente") de algo incerto, √© um dos motivos pelos quais vari√°veis aleat√≥rias s√£o t√£o √∫teis, e √© exatamente o que exploraremos na pr√≥xima se√ß√£o.

# Valor esperado

Quando comecei a estudar valor esperado, encontrei diversas defini√ß√µes que, embora se complementassem, √†s vezes me deixavam confusa. Nesta se√ß√£o, minha proposta √© organizar essas ideias e mostrar como elas se conectam, para que o conceito de valor esperado fique mais intuitivo , independentemente da forma pela qual voc√™ o enxergue.

## C√°lculo a partir de experimentos 

A primeira defini√ß√£o que temos √© que o **valor esperado √© o resultado m√©dio que esperamos obter se pud√©ssemos repetir um experimento aleat√≥rio muitas e muitas vezes, sob as mesmas condi√ß√µes**. No mundo real, contudo, a maior parte dos experimentos aleat√≥rios acontece apenas uma vez: no exemplo da aposta entre Ana e Bia, a entrevista com as 10 pessoas ocorre uma √∫nica vez, e s√£o essas respostas que determinam se Ana ganhar√° ou perder√° dinheiro. Ainda assim, podemos imaginar o que aconteceria **em m√©dia** se a mesma aposta fosse repetida in√∫meras vezes, cada vez com 10 pessoas escolhidas ao acaso. O valor esperado √© justamente esse resultado t√≠pico: o retorno m√©dio que apareceria com mais regularidade ao longo de muitas repeti√ß√µes hipot√©ticas do experimento.

No gr√°fico "Distribui√ß√£o do retorno financeiro para as amostras geradas" (replicado abaixo), √© exatamente isso que vemos: ao repetirmos o experimento 10000 vezes, o retorno financeiro mais frequente √© o de 12 reais. A linha vermelha tracejada indica a m√©dia do retorno financeiro de todos os experimentos e tem o valor exato de **`r round(mean(n_samples$balance), 2)`** (muito pr√≥ximo de 12!).

```{r}

x_values <- unique(n_samples$balance)
n_samples |> 
  ggplot(
    aes(
      x = balance
    )
  ) +
  geom_histogram(binwidth = 1) +
  scale_x_continuous(breaks = x_values) +
  geom_vline(
    aes(xintercept = mean(n_samples$balance)), 
    color = "red",
    linetype = "dashed"
  ) +
  theme_minimal() +
  labs(
    title = "Distribui√ß√£o do retorno financeiro para as amostras geradas",
    x = "retorno financeiro (R$)",
    y = "quantidade de amostras"
  )

```

## C√°lculo a partir da f√≥rmula te√≥rica

Outra maneira de calcular o valor esperado √© mostrada na f√≥rmula abaixo. Ela nada mais √© do que a vers√£o matem√°tica (mais organizada e elegante) do c√°lculo intuitivo que fizemos no in√≠cio deste post.

$$
\mathbb{E}[X] = \sum_{i=1}^n x_i p_i
$$

Onde:

- $\mathbb{E}[X]$ representa o valor esperado da vari√°vel aleat√≥ria $X$;
- $x_i$ representa o valor que a vari√°vel aleat√≥ria $X$ pode assumir;
- $p_i$ representa a probabilidade da vari√°vel aleat√≥ria assumir aquele valor.

Considerando o exemplo da nossa aposta, temos que a nossa vari√°vel aleat√≥ria $X$ pode ser:

$$
X = 
\begin{cases}
10, & \text{se responder ‚Äúsim‚Äù} \\
-1, & \text{se responder ‚Äún√£o‚Äù}
\end{cases}
$$

Como sabemos que 20% da popula√ß√£o responderia "sim" para nossa pergunta, podemos transformar essa informa√ß√£o em probabilidade. Uma porcentagem nada mais √© do que uma raz√£o sobre 100. Assim, $20\% = \frac{20}{100}$. Como probabilidades s√£o representadas por valores ente 0 e 1, basta dividir 20 por 100, obtendo 0.2. Portanto, a probabilidade de um indiv√≠duo escolhido aleatoriamente responder "sim" √© ${P}(\text{sim}) = 0.20$. De forma an√°loga, sabemos que a probabilidade de um indiv√≠duo escolhido aleatoriamente responder "n√£o" √© ${P}(\text{n√£o}) = 0.80$.

Usando a f√≥rmula do valor esperado, temos:

$$
\mathbb{E}[X] \;=\; \sum x_i p_i \;=\; 10\cdot 0.20 + (-1)\cdot 0.80
$$
$$
\mathbb{E}[X] = 2 - 0{.}8 = 1{.}20
$$

Isso significa que, em m√©dia, cada pessoa entrevistada gera um ganho esperado de 1.20 reais. Como a aposta envolve 10 pessoas, o valor esperado do ganho total √©:

$$
\mathbb{E}[\text{ganho total}] = 10 \times \mathbb{E}[X] = 10 \times 1{.}20 = 12\,\text{reais}
$$

Esse c√°lculo te√≥rico do valor esperado coincide exatamente com o resultado obtido de forma emp√≠rica nos experimentos realizados. Ou seja, quando repetimos o experimento muitas vezes (entrevistando grupos de 10 pessoas e registrando o ganho final) observamos que a m√©dia dos ganhos experimentais se aproxima do valor previsto pela f√≥rmula do valor esperado. Isso acontece porque o valor esperado representa justamente a m√©dia de longo prazo de um experimento aleat√≥rio, e, portanto, quando acumulamos evid√™ncias emp√≠ricas suficientes, o comportamento observado se alinha ao que a teoria prev√™.

## C√°lculo a partir da distribui√ß√£o populacional

O valor esperado tamb√©m pode ser entendido como a **m√©dia populacional que obter√≠amos se tiv√©ssemos acesso a todos os dados da popula√ß√£o**. Como normalmente n√£o dispomos de todas as observa√ß√µes poss√≠veis, essa m√©dia √© tratada como um valor te√≥rico, definido pelas probabilidades da vari√°vel aleat√≥ria em estudo. No nosso exemplo, por√©m, temos a popula√ß√£o completa, o que nos permite calcular diretamente essa m√©dia, como mostrado abaixo.

```{r echo = TRUE}

population |> 
  mutate(
    balance = case_when(
      answer == 0 ~ -1,
      answer == 1 ~ 10
    )
  ) |> 
  summarise(
    population_avg_balance = mean(balance)
  ) |> 
  mk_tbl(
    table_title = "M√©dia populacional"
  )

```
<br>
Considerando que cada resposta "sim" gera um retorno de +10 reais e cada resposta "n√£o" gera um retorno de ‚Äì1 real, ent√£o a m√©dia calculada sobre toda a popula√ß√£o resulta em um valor de R\$ 1.20. Esse valor coincide exatamente com o que obtivemos pela f√≥rmula do valor esperado: em m√©dia, cada pessoa entrevistada gera um ganho esperado de R\$ 1.20.

## Um resumo de todas as defini√ß√µes

Como podemos notar, o valor esperado pode ser compreendido (e calculado) a partir de diferentes perspectivas, cada uma oferecendo uma forma distinta de enxergar o conceito (mas todas convergindo para o mesmo resultado).

Em resumo, podemos entender o valor esperado como:

- **Uma m√©dia emp√≠rica**, interpretada como o resultado m√©dio que esperamos obter ao repetir um experimento aleat√≥rio muitas e muitas vezes sob as mesmas condi√ß√µes.

- **Uma m√©dia te√≥rica**, calculada pela f√≥rmula $\mathbb{E}[X] = \sum_{i=1}^n x_i p_i$, que combina cada resultado poss√≠vel com sua probabilidade.

- **A m√©dia populacional**, que obter√≠amos caso tiv√©ssemos acesso a todas as observa√ß√µes geradas pela vari√°vel aleat√≥ria.

O valor esperado √©, portanto, a medida te√≥rica que descreve o valor m√©dio de uma vari√°vel aleat√≥ria, a m√©dia "verdadeira" (populacional) de sua distribui√ß√£o, e funciona como o par√¢metro central ao qual as m√©dias observadas nas amostras tendem a se aproximar conforme coletamos mais e mais dados.

# Valor esperado em diferentes distribui√ß√µes

Conforme j√° mencionado, vari√°veis aleat√≥rias s√£o valores gerados por algum processo incerto, como a altura das pessoas, o resultado de um experimento ou comportamentos que variam de indiv√≠duo para indiv√≠duo. No exemplo da aposta entre Ana e Bia, o experimento aleat√≥rio consiste em entrevistar 10 pessoas e registrar a resposta de cada uma √† pergunta **"G√™meos √© o melhor signo do zod√≠aco, n√©?"**. Ao associarmos as respostas "sim" ou "n√£o" aos retornos financeiros correspondentes, obtemos nossa vari√°vel aleat√≥ria.

Apesar de incertas, vari√°veis aleat√≥rias n√£o se comportam de qualquer maneira: elas seguem o que chamamos de **distribui√ß√£o**. Uma distribui√ß√£o descreve como os poss√≠veis valores de uma vari√°vel aleat√≥ria se espalham e com que frequ√™ncia cada valor tende a aparecer. Em outras palavras, ela √© a "hist√≥ria" dos dados: mostra quais resultados s√£o comuns, quais s√£o raros e qual √© o comportamento geral daquela vari√°vel na popula√ß√£o.

No exemplo que estamos usando, ao entrevistar 10 pessoas, calculamos o retorno financeiro daquele grupo. Esse retorno segue uma distribui√ß√£o chamada **Binomial**, que descreve situa√ß√µes em que repetimos o mesmo experimento diversas vezes (fazer a mesma pergunta para v√°rias pessoas) e cada tentativa s√≥ pode resultar em duas sa√≠das poss√≠veis, como "sim" ou "n√£o". A distribui√ß√£o Binomial nos diz quantas vezes um determinado resultado tende a aparecer ao longo dessas repeti√ß√µes, assumindo que cada pessoa responde de forma independente e que a probabilidade de responder "sim" √© sempre a mesma.

Al√©m da Binomial, existem v√°rias outras distribui√ß√µes muito usadas na pr√°tica, como a Normal, a Gamma, a Poisson e a Beta, e por a√≠ vai... Cada uma descreve comportamentos e padr√µes distintos que aparecem em diferentes tipos de dados. 

No gr√°fico abaixo, simulamos popula√ß√µes que seguem algumas dessas distribui√ß√µes para observar visualmente como elas se apresentam.

```{r echo = TRUE}

set.seed(123)
distributions <- tibble(
  distribution = c("Binomial", "Normal", "Beta"),
  values = list(
    rbinom(100000, size = 10, prob = 0.3),
    rnorm(100000, mean = 0, sd = 1),
    rbeta(100000, shape1 = 8, shape2 = 2)
  )
) |> 
  tidyr::unnest(values) |> 
  rename(random_variable = values)

```

```{r}

distributions |> 
  ggplot(
    aes(
      x = random_variable
    )
  ) +
  geom_histogram() +
  facet_wrap(
    ~distribution,
    scales = "free"
  ) +
  theme_minimal() +
  labs(
    x = "vari√°vel aleat√≥ria",
    y = "quantidade",
    title = "Exemplo de popula√ß√µes que seguem diferentes distribui√ß√µes"
  )

```


O objetivo deste post n√£o √© aprofundar no estudo das distribui√ß√µes, mas sim discutir o valor esperado. E aqui vem o ponto-chave que gostaria de trazer nessa se√ß√£o: **o conceito de valor esperado √© o mesmo para qualquer distribui√ß√£o**. Independentemente da forma da distribui√ß√£o populacional da vari√°vel aleat√≥ria, **o valor esperado √© sempre a m√©dia populacional**.

Abaixo, mostramos para cada distribui√ß√£o simulada anteriormente o c√°lculo da m√©dia populacional (ou seja, a m√©dia considerando todos os valores gerados naquela popula√ß√£o simulada).

```{r echo = TRUE}

distributions |> 
  summarise(
    population_mean = mean(random_variable),
    .by = c(distribution)
  ) |> 
  arrange(
    distribution
  ) |> 
  mk_tbl(
    table_title = "M√©dia populacional de diferentes distribui√ß√µes"
  )

```

<br>
Em seguida, aplicamos, para cada uma dessas popula√ß√µes, o c√°lculo do valor esperado pelo m√©todo emp√≠rico descrito na se√ß√£o anterior e podemos observar que o valor obtido empiricamente √© praticamente igual √† m√©dia populacional.

```{r echo = TRUE}

distributions_samples <- distributions |> 
  group_by(distribution) |> 
  summarise(
    sample_mean = purrr::map_dbl(
      1:1000,
      ~mean(sample(random_variable, size = 1000, replace = TRUE))
    )
  ) |> 
  ungroup()

distributions_samples |> 
  summarise(
    expected_value = mean(sample_mean),
    .by = c(distribution)
  ) |> 
  arrange(
    distribution
  ) |> 
  mk_tbl(
    table_title = "Valor esperado de diferentes distribui√ß√µes"
  )

```

<br>
*Importante: para cada distribui√ß√£o, tamb√©m poder√≠amos calcular o valor esperado usando a f√≥rmula te√≥rica ou diretamente a partir dos par√¢metros da distribui√ß√£o. Para manter o texto mais simples, ficamos apenas com o c√°lculo emp√≠rico.*

Saber que o valor esperado √© a m√©dia te√≥rica de uma distribui√ß√£o √© importante porque ele representa o ponto em torno do qual a vari√°vel aleat√≥ria "se organiza": o seu verdadeiro "centro de gravidade". Todavia, na pr√°tica, quase nunca temos acesso √† distribui√ß√£o completa (ou seja, aos dados populacionais). O que temos s√£o amostras da popula√ß√£o real. Por isso, o nosso trabalho costuma ser estimar a m√©dia populacional a partir da m√©dia amostral. Quando entendemos que o valor esperado √© justamente essa **m√©dia te√≥rica** que estamos tentando aproximar com os dados observados, conseguimos interpretar melhor o que nossas estimativas significam, avaliar o quanto elas est√£o pr√≥ximas do "centro" real da vari√°vel e tomar decis√µes mais informadas mesmo diante da incerteza. Compreender o valor esperado, portanto, √© entender o ponto de equil√≠brio da vari√°vel, seja olhando para toda a distribui√ß√£o, seja olhando para os dados que conseguimos observar.

# A melhor aposta

Voltando ao tema central deste post, chegamos √† conclus√£o de que o resultado da aposta entre Ana e Bia depende, no fim das contas, da SORTE. Por√©m, com um pouco de estat√≠stica, conseguimos ir al√©m do palpite intuitivo. A partir da defini√ß√£o de valor esperado, descobrimos algo importante: a estrutura da aposta favorece Ana, j√° que o resultado financeiro mais prov√°vel gira em torno de 12 reais de ganho.

Contudo, uma outra pergunta surge a partir do que estudamos: se Ana decidisse mudar o valor pago por cada pessoa que responde "sim", haveria algum ponto em que a aposta se tornaria desfavor√°vel para ela?

√â exatamente aqui que o valor esperado mostra sua for√ßa. Ele permite que Ana explore diferentes cen√°rios antes mesmo de fazer a aposta. Basta variar o valor pago por cada resposta "sim" e calcular, para cada possibilidade, se o balan√ßo financeiro esperado √© positivo ou negativo. 

No c√≥digo abaixo, calculamos o valor esperado da aposta considerando que as respostas "sim" dos entrevistados poderiam variar entre R\$ 1 e R\$ 20. Pelo gr√°fico a seguir, observamos que, se o pagamento por resposta "sim" fosse menor que R\$ 5, Ana tenderia a perder dinheiro!

```{r echo = TRUE}

n <- 10 # pessoas amostradas
best_bet <- NULL

for (i in seq(1:1000)){
  
  # amostra retirada nessa itera√ß√£o
  smp <- sample(population$answer, size = n, replace = FALSE)
  
  # rendimento caso o valor da aposte mude
  balance <- c()
  bet_money_max <- 20
  for (j in seq(1:bet_money_max)){
    b <- (sum(smp) * j) - ((n - sum(smp)) * 1)
    balance <- c(balance, b)
  }
  
  # colunas para adicionar
  col_sample_number <- rep(i, bet_money_max)
  col_bet_money <- seq(1, bet_money_max)
  col_balance <- balance
  # tabela tempor√°ria
  temp <- tibble(
    sample_number = col_sample_number,
    bet_money = col_bet_money,
    balance = col_balance
  )
  
  # tabela final
  best_bet <- best_bet |> bind_rows(temp)
  
}

```

```{r}

best_bet |> 
  summarise(
    #n_samples = n(),
    expected_balance = mean(balance),
    .by = c(bet_money)
  ) |> 
  ggplot(
    aes(
      x = bet_money,
      y = expected_balance
    )
  ) +
  geom_line() +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  labs(
    x = "valor apostado",
    y = "retorno esperado",
    title = "Retorno esperado para diferentes valores de aposta"
  )

```

O mais interessante √© perceber que essa l√≥gica n√£o vale s√≥ para a aposta da Ana. Ela vale para praticamente qualquer situa√ß√£o incerta da vida: investimentos, decis√µes de produto, estrat√©gias de neg√≥cio, experimentos, pesquisas, escolhas do dia a dia. **O valor esperado nos d√° uma forma racional de enxergar onde est√° o ponto de equil√≠brio de um processo incerto.**

E, no fundo, √© isso que torna a estat√≠stica t√£o fascinante: assim como o tar√¥ e a astrologia, ela tenta lan√ßar luz sobre o desconhecido, e, a partir de ferramentas que nos permitem quantificar incertezas, nos ajuda a comparar cen√°rios e entender, com mais clareza, o que podemos esperar do futuro. Estat√≠stica n√£o elimina o acaso, mas nos ajuda a navegar por ele com muito mais sabedoria.

